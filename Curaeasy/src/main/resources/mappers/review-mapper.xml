<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="reviewMapper">
	<resultMap id="reviewResultSet" type="review">
		<result column="REVIEW_TITLE" property="reviewTitle" />
		<result column="REVIEW_STATUS" property="reviewStatus" />
		<result column="REVIEW_NO" property="reviewNo" />
		<result column="REVIEW_IMAGE" property="reviewImage" />
		<result column="REVIEW_ENROLL_DATE" property="reviewEnrollDate" />
		<result column="REVIEW_COUNT" property="reviewCount" />
		<result column="REVIEW_CONTENT" property="reviewContent" />
		<result column="MEMBER_NO" property="memberNo" />
	</resultMap>

	<select id="myReviewList" parameterType="_int" resultMap="reviewResultSet">
		SELECT *
		  FROM REVIEW
		 WHERE MEMBER_NO = #{userNo}
	</select>
	
	
	<select id="selectListAllCount" resultType="_int" parameterType="string" >
		SELECT count(*)
		  FROM REVIEW R
		  JOIN MEMBER M ON (R.MEMBER_NO = M.MEMBER_NO)
		 WHERE REVIEW_TITLE like '%'||#{search}||'%' or  MEMBER_ID like '%'||#{search}||'%' AND REVIEW_STATUS = 'Y'
	</select>
	<select id="selectAllList" resultMap="reviewResultSet"  parameterType="string">
		SELECT REVIEW_TITLE,REVIEW_NO,REVIEW_COUNT,REVIEW_ENROLL_DATE,m.MEMBER_ID as "REVIEW_CONTENT"
		  FROM REVIEW R
          JOIN MEMBER M ON (R.MEMBER_NO = M.MEMBER_NO)
		 WHERE REVIEW_TITLE like '%'||#{search}||'%' or  MEMBER_ID like '%'||#{search}||'%' AND REVIEW_STATUS = 'Y'
		 ORDER BY REVIEW_NO DESC
	</select>
	
	
	
		<select id="selectTitleListCount" parameterType="string" resultType="_int">
		SELECT count(*)
		  FROM REVIEW R
		  JOIN MEMBER M ON (R.MEMBER_NO = M.MEMBER_NO)
		 WHERE REVIEW_TITLE like '%'||#{search}||'%' AND  REVIEW_STATUS = 'Y'
	</select>
	<select id="selectTitleList" parameterType="string" resultMap="reviewResultSet">
		SELECT REVIEW_TITLE,REVIEW_NO,REVIEW_COUNT,REVIEW_ENROLL_DATE,m.MEMBER_ID as "REVIEW_CONTENT"
		  FROM REVIEW R
          JOIN MEMBER M ON (R.MEMBER_NO = M.MEMBER_NO)
		  WHERE REVIEW_TITLE like '%'||#{search}||'%' AND  REVIEW_STATUS = 'Y'
		 ORDER BY REVIEW_NO DESC
	</select>
	
	
	
		<select id="selectWriterListCount" parameterType="string" resultType="_int">
		SELECT count(*)
		  FROM REVIEW R
		  JOIN MEMBER M ON (R.MEMBER_NO = M.MEMBER_NO)
		 WHERE MEMBER_ID like '%'||#{search}||'%' AND  REVIEW_STATUS = 'Y'
	</select>
	<select id="selectWriterList" parameterType="string" resultMap="reviewResultSet">
		SELECT REVIEW_TITLE,REVIEW_NO,REVIEW_COUNT,REVIEW_ENROLL_DATE,m.MEMBER_ID as "REVIEW_CONTENT"
		  FROM REVIEW R
          JOIN MEMBER M ON (R.MEMBER_NO = M.MEMBER_NO)
		  WHERE MEMBER_ID like '%'||#{search}||'%' AND  REVIEW_STATUS = 'Y'
		 ORDER BY REVIEW_NO DESC
	</select>
	
		<select id="ticket" resultType="_int" parameterType="_int" >
		SELECT count(*)
		  FROM RESERVE
		 WHERE MEMBER_NO = #{userNo}
	</select>
</mapper>
